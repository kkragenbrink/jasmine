'use strict';

var sinon = require('sinon');
var Mitm = require('mitm');

Mitm.createServer = sinon.spy(function () {
    let server = Mitm();
    server.listen = sinon.spy(function () {});
    server.close = sinon.spy(server.disable.bind(server));

    Mitm.server = server;
    return server;
});



module.exports = Mitm;
